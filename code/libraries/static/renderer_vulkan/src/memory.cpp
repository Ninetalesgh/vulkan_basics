cpu and gpu memory allocation

